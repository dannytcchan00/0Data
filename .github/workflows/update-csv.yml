name: æ¯æ—¥è‡ªå‹•æ›´æ–°å‡ºå…¥å¢ƒ CSV

on:
  schedule:
    - cron: '0 2 * * *'    # æ¯æ—¥é¦™æ¸¯æ™‚é–“ 10:00
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: ä¸‹è¼‰ CSV åˆ° data
        run: |
          mkdir -p data
          curl -L "https://www.immd.gov.hk/opendata/eng/transport/immigration_clearance/statistics_on_daily_passenger_traffic.csv" \
            -o data/immi_daily.csv
          ls -R

      - name: å¼·åˆ¶ Commit ä¸¦æ¨é€
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git add data/immi_daily.csv
          git commit -m "ğŸ“Š force æ›´æ–° immigration.csv $(date +'%Y-%m-%d %H:%M')" || echo "no commit"
          git push || echo "no push"
