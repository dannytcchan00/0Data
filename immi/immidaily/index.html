<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>香港全境出入境情況地圖</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body, html {
      height: 100%; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #121222; color: #eee;
    }
    #map {
      height: 100vh; width: 100%;
    }
    .marker-circle {
      border-radius: 50%;
      border: 2px solid white;
      color: white;
      text-align:center;
      line-height: 1.2;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    // 初始化地圖視窗定位於香港全境
    const map = L.map("map").setView([22.33, 114.18], 11);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "© OpenStreetMap contributors",
    }).addTo(map);

    // 當日各關口示範資料：位置經緯度及出入境人數
    const points = [
      {name: "香港國際機場", lat: 22.3089, lng: 113.9150, passengers: 1200},
      {name: "羅湖口岸", lat: 22.5279, lng: 114.1136, passengers: 2300},
      {name: "落馬洲口岸", lat: 22.4997, lng: 114.0675, passengers: 1800},
      {name: "深圳灣口岸", lat: 22.4875, lng: 113.9250, passengers: 2500},
      {name: "港珠澳大橋", lat: 22.1997, lng: 113.8833, passengers: 900},
      {name: "文錦渡口岸", lat: 22.5525, lng: 114.1333, passengers: 600},
      {name: "沙頭角口岸", lat: 22.5528, lng: 114.2167, passengers: 450},
      {name: "紅磡渡輪碼頭", lat: 22.3037, lng: 114.1700, passengers: 350},
      {name: "西九龍高鐵站", lat: 22.3050, lng: 114.1570, passengers: 500},
      {name: "文錦渡鐵路口岸", lat: 22.5510, lng: 114.1350, passengers: 200},
    ];

    // 根據人流大小調整半徑
    function getRadius(passengers) {
      if (passengers < 500) return 10;
      if (passengers < 1000) return 15;
      if (passengers < 2000) return 20;
      if (passengers < 3000) return 25;
      return 30;
    }

    // 加入標記，並綁定彈出視窗顯示詳細資訊
    points.forEach(({name, lat, lng, passengers}) => {
      const radius = getRadius(passengers);
      const markerHtml = `<div class="marker-circle" style="width: ${radius*2}px; height: ${radius*2}px; background: rgba(74, 222, 128, 0.7); border-color: rgba(74, 222, 128, 1);">${passengers}</div>`;
      
      const icon = L.divIcon({
        className: 'custom-marker',
        html: markerHtml,
        iconSize: [radius*2, radius*2],
        iconAnchor: [radius, radius],
      });

      L.marker([lat, lng], {icon})
        .addTo(map)
        .bindPopup(`<b>${name}</b><br>當日出入境人數：${passengers.toLocaleString()}`)
        ;
    });
  </script>
</body>
</html>
